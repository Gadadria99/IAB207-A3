{% extends 'base.html' %}


{% block content %}

      <main>
        <div class="col event-container-profile">
          <div class="row" style="max-width: fit-content;">
            <div class="col-md-12 custom-col-2">
              <h2>Your Bookings</h2> 




              <div class col-md-3> 
                <div class="col" id="profilediv" div id="custom-col-2">
                  <form action = "" class= "form_search col-md-12" role="search" method = "POST">
                    <input class= "searchInp" type="search" id="searchBar" name="searchBar"
                    placeholder="Discover"
                    aria-label="Search through site content">
                    <button class = "searchbtn">
                      <svg class= "svgSearch" viewBox="0 0 1024 1024"><path class="path1" d="M848.471 928l-263.059-263.059c-48.941 36.706-110.118 55.059-177.412 55.059-171.294 0-312-140.706-312-312s140.706-312 312-312c171.294 0 312 140.706 312 312 0 67.294-24.471 128.471-55.059 177.412l263.059 263.059-79.529 79.529zM189.623 408.078c0 121.364 97.091 218.455 218.455 218.455s218.455-97.091 218.455-218.455c0-121.364-103.159-218.455-218.455-218.455-121.364 0-218.455 97.091-218.455 218.455z"></path></svg>
                    </button>
                      </form>
  
              {% if booked_events != 0 %}
                <!-- Iterate through booked events using Jinja2 loop -->
                
                {% for booking in booked_events %}
                  <div class="card">
                    <img src="/{{ booking.event.eventImage }}" class="img img-responsive" alt="{{ booking.event.name }}">
                    <a href="{{ url_for('event.show', id=booking.event.id) }}">
                      <div class="profile-name">{{ booking.event.name }}</div>
                      <div class="profile-username">{{ booking.event.venueName }}</div>
                      <div class="profile-date">{{ booking.event.eventTime.strftime('%dth %B %Y') }}</div>
                      <div class="status">{{ booking.event.status }}</div>
                      
                    </a>
                  </div>
                  <h4>BOOKING ID: {{ booking.id }}</h4>
                  <h3>No. of tickets booked: {{ booking.num_tickets }}</h3>
                  <h5>Event booked @ {{ booking.purchase_date.strftime('%H:%M on %d/%m/%y') }}</h5>
                  
                {% endfor %}
                <!-- End of loop -->
              {% else %}
                <!-- Display a message when there are no bookings -->
                <p>No bookings yet. <a href="{{ url_for('event.index') }}">Browse events</a> to make a booking.</p>
              {% endif %}
            </div>
            </div>
          </div>
        </div>
      </main>
{% endblock %}
